.set LOCALID_ATTENDANT, 1

CeruleanCity_BattleTentCorridor_MapScripts::
	map_script MAP_SCRIPT_ON_FRAME_TABLE, CeruleanCity_BattleTentCorridor_OnFrame
	map_script MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE, CeruleanCity_BattleTentCorridor_OnWarp
	.byte 0

	@ This is Cerulean Tent's version of the Battle Factory Pre-Battle Room

CeruleanCity_BattleTentCorridor_OnWarp:
	map_script_2 VAR_TEMP_1, 0, CeruleanCity_BattleTentCorridor_EventScript_SetUpObjects
	.2byte 0

CeruleanCity_BattleTentCorridor_EventScript_SetUpObjects::
	setvar VAR_TEMP_1, 1
	goto_if_ne VAR_0x8006, 1, CeruleanCity_BattleTentCorridor_EventScript_TurnPlayerNorth
	setobjectxy LOCALID_ATTENDANT, 2, 2
	turnobject LOCALID_ATTENDANT, DIR_SOUTH
CeruleanCity_BattleTentCorridor_EventScript_TurnPlayerNorth::
	turnobject OBJ_EVENT_ID_PLAYER, DIR_NORTH
	end

CeruleanCity_BattleTentCorridor_OnFrame:
	map_script_2 VAR_TEMP_0, 0, CeruleanCity_BattleTentCorridor_EventScript_EnterCorridor
	.2byte 0

CeruleanCity_BattleTentCorridor_EventScript_EnterCorridor::
	goto_if_eq VAR_0x8006, 1, CeruleanCity_BattleTentCorridor_EventScript_ReturnToRoomFromBattle
	setvar VAR_TEMP_0, 1
	applymovement LOCALID_ATTENDANT, CeruleanCity_BattleTentCorridor_Movement_AttendantEnter
	applymovement OBJ_EVENT_ID_PLAYER, CeruleanCity_BattleTentCorridor_Movement_PlayerEnter
	waitmovement 0
	goto_if_eq VAR_0x8006, 2, CeruleanCity_BattleTentCorridor_EventScript_ResumeChallenge
	ceruleantent_generaterentalmons
	ceruleantent_generateopponentmons
	msgbox BattleFrontier_BattleFactoryPreBattleRoom_Text_HoldMonsChooseFromSelection, MSGBOX_DEFAULT
	fadescreen FADE_TO_BLACK
	ceruleantent_rentmons
	waitstate
CeruleanCity_BattleTentCorridor_EventScript_EnterBattleRoom::
	msgbox BattleFrontier_BattleFactoryPreBattleRoom_Text_RightThisWay, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_ATTENDANT, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	opendoor 2, 1
	waitdooranim
	applymovement LOCALID_ATTENDANT, CeruleanCity_BattleTentCorridor_Movement_AttendantExit
	applymovement OBJ_EVENT_ID_PLAYER, CeruleanCity_BattleTentCorridor_Movement_PlayerExit
	waitmovement 0
	closedoor 2, 1
	waitdooranim
	warp MAP_CERULEAN_CITY_BATTLE_TENT_BATTLE_ROOM, 4, 4
	waitstate
	end

CeruleanCity_BattleTentCorridor_EventScript_ReturnToRoomFromBattle::
	factory_setopponentmons
	factory_resethelditems
	msgbox BattleFrontier_BattleFactoryPreBattleRoom_Text_LetUsRestoreMons, MSGBOX_DEFAULT
	playfanfare MUS_RG_HEAL
	waitfanfare
	special HealPlayerParty
CeruleanCity_BattleTentCorridor_EventScript_AskReadyForOpponent::
	frontier_get FRONTIER_DATA_BATTLE_NUM
	call_if_eq VAR_RESULT, 1, CeruleanCity_BattleTentCorridor_EventScript_ReadyFor2ndOpponent
	call_if_eq VAR_RESULT, 2, CeruleanCity_BattleTentCorridor_EventScript_ReadyFor3rdOpponent
	multichoice 20, 6, MULTI_GO_ON_REST_RETIRE, TRUE
	switch VAR_RESULT
	case 0, CeruleanCity_BattleTentCorridor_EventScript_AskSwapMon
	case 1, CeruleanCity_BattleTentCorridor_EventScript_AskPauseChallenge
	case 2, CeruleanCity_BattleTentCorridor_EventScript_AskRetireChallenge

CeruleanCity_BattleTentCorridor_EventScript_AskPauseChallenge::
	msgbox BattleFrontier_BattleFactoryPreBattleRoom_Text_SaveAndQuitGame, MSGBOX_YESNO
	switch VAR_RESULT
	case NO, CeruleanCity_BattleTentCorridor_EventScript_AskReadyForOpponent
	case YES, CeruleanCity_BattleTentCorridor_EventScript_PauseChallenge
	case MULTI_B_PRESSED, CeruleanCity_BattleTentCorridor_EventScript_AskReadyForOpponent

CeruleanCity_BattleTentCorridor_EventScript_AskRetireChallenge::
	message BattleFrontier_BattleFactoryPreBattleRoom_Text_RetireFromChallenge
	waitmessage
	multichoicedefault 20, 8, MULTI_YESNO, 1, FALSE
	switch VAR_RESULT
	case 1, CeruleanCity_BattleTentCorridor_EventScript_AskReadyForOpponent
	case 0, CeruleanCity_BattleTent_EventScript_WarpToLobbyLost
	case MULTI_B_PRESSED, CeruleanCity_BattleTentCorridor_EventScript_AskReadyForOpponent

CeruleanCity_BattleTentCorridor_EventScript_AskSwapMon::
	ceruleantent_generateopponentmons
	msgbox BattleFrontier_BattleFactoryPreBattleRoom_Text_LikeToSwapMon, MSGBOX_YESNO
	switch VAR_RESULT
	case NO, CeruleanCity_BattleTentCorridor_EventScript_EnterBattleRoom
	case YES, CeruleanCity_BattleTentCorridor_EventScript_SwapMons
	case MULTI_B_PRESSED, CeruleanCity_BattleTentCorridor_EventScript_EnterBattleRoom

CeruleanCity_BattleTentCorridor_EventScript_SwapMons::
	fadescreen FADE_TO_BLACK
	ceruleantent_swapmons
	waitstate
	goto_if_eq VAR_RESULT, 1, CeruleanCity_BattleTentCorridor_EventScript_EnterBattleRoom
	msgbox BattleFrontier_BattleFactoryPreBattleRoom_Text_YourSwapIsComplete, MSGBOX_DEFAULT
	goto CeruleanCity_BattleTentCorridor_EventScript_EnterBattleRoom

CeruleanCity_BattleTentCorridor_EventScript_ReadyFor2ndOpponent::
	message BattleFrontier_BattleFactoryPreBattleRoom_Text_ReadyFor2ndOpponent
	waitmessage
	return

CeruleanCity_BattleTentCorridor_EventScript_ReadyFor3rdOpponent::
	message BattleFrontier_BattleFactoryPreBattleRoom_Text_ReadyFor3rdOpponent
	waitmessage
	return

CeruleanCity_BattleTentCorridor_EventScript_PauseChallenge::
	message BattleFrontier_BattleFactoryPreBattleRoom_Text_SavingDataPleaseWait
	waitmessage
	ceruleantent_save CHALLENGE_STATUS_PAUSED
	playse SE_SAVE
	waitse
	fadescreen FADE_TO_BLACK
	frontier_reset
	end

CeruleanCity_BattleTentCorridor_EventScript_ResumeChallenge::
	special SavePlayerParty
	factory_setparties 0
	goto CeruleanCity_BattleTentCorridor_EventScript_AskReadyForOpponent

CeruleanCity_BattleTentCorridor_Movement_PlayerEnter:
	walk_up
	walk_up
	walk_up
	walk_up
	step_end

CeruleanCity_BattleTentCorridor_Movement_PlayerExit:
	walk_up
	walk_up
	set_invisible
	step_end

CeruleanCity_BattleTentCorridor_Movement_AttendantEnter:
	walk_up
	walk_up
	walk_up
	walk_up
	walk_in_place_faster_down
	step_end

CeruleanCity_BattleTentCorridor_Movement_AttendantExit:
	walk_up
	set_invisible
	step_end
